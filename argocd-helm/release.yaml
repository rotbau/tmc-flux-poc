---
    apiVersion: helm.toolkit.fluxcd.io/v2beta1
    kind: HelmRelease
    metadata:
      name: argocd
    spec:
      interval: 5m
      chart:
        spec:
          version: "6.4.1"
          chart: argo-cd
          sourceRef:
            kind: HelmRepository
            name: argo-helm-charts
          interval: 60m
      install:
        crds: Create
      upgrade:
        crds: CreateReplace
      values:
        alertmanager:
          enabled: false
        prometheus:
          prometheusSpec:
            retention: 24h
            resources:
              requests:
                cpu: 200m
                memory: 200Mi
            podMonitorNamespaceSelector: {}
            podMonitorSelector:
              matchLabels:
                app.kubernetes.io/component: argocd
    
